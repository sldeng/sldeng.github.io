(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{383:function(s,n,e){"use strict";e.r(n);var a=e(41),t=Object(a.a)({},(function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"微信分享"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#微信分享"}},[s._v("#")]),s._v(" 微信分享")]),s._v(" "),e("ol",[e("li",[s._v("注意事项")])]),s._v(" "),e("ul",[e("li",[s._v("微信分享到朋友圈，朋友；引用JSSDK文件只能在微信浏览器打开才能调用SDK提供的方法")]),s._v(" "),e("li",[s._v("需要在微信公众号后台绑定js安全域名 绑定格式 "),e("code",[s._v("qyrhdq.cn")])]),s._v(" "),e("li",[s._v("需要在微信公众号后台添加ip白名单")]),s._v(" "),e("li",[s._v("url要encodeURIComponent")]),s._v(" "),e("li",[s._v("后台需要全局缓存下"),e("code",[s._v("jsapi_ticket，access_token")]),s._v(",微信限制"),e("code",[s._v("jsapi_ticket，access_token")]),s._v("日请求次数，每日限额"),e("code",[s._v("2000")]),s._v("次，且每次获取有效时间为7200s")])]),s._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[s._v("代码实现")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("  init: function(option) {\n    // 初始化 微信分享的参数\n    console.log(option)\n    let url = `${location.href.split('#')[0]}`\n\n    // debugger\n    // http://192.168.40.5/\n    let link = `${url}#/invite-users?inviteCode=${option.code}`\n    console.log('link', link)\n    var shareData = {\n      title: '一款助农公益新平台', // 分享标题\n      desc: '幸福精彩生活由此开启，看短视频也能赚钱。分享给好友，积累新财富！', // 分享描述\n      link: link, // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致\n      imgUrl: 'http://f.qyrhdq.cn/assets/images/logo-icon.png', // 分享图标\n      success: function() {\n        // 分享成功可以做相应的数据处理\n        //alert(\"分享成功\"); }\n      }\n    }\n    wx.config({\n      debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\n      appId: option.appId, // 必填，公众号的唯一标识\n      timestamp:  String(option.timestamp), // 必填，生成签名的时间戳\n      nonceStr:  option.nonceStr, // 必填，生成签名的随机串\n      signature: option.signature, // 必填，签名\n      jsApiList: ['onMenuShareAppMessage', 'onMenuShareTimeline'] // 必填，需要使用的JS接口列表\n    })\n    wx.checkJsApi({\n      jsApiList: ['onMenuShareAppMessage', 'onMenuShareTimeline'], // 需要检测的JS接口列表，所有JS接口列表见附录2,\n      success: function(res) {\n        // 以键值对的形式返回，可用的api值true，不可用为false\n        // 如：{\"checkResult\":{\"chooseImage\":true},\"errMsg\":\"checkJsApi:ok\"}\n        console.log(res)\n      },\n    })\n    wx.ready(function() {\n      //需在用户可能点击分享按钮前就先调用 ---分享朋友\n      wx.onMenuShareAppMessage(shareData)\n      //分享给朋友圈\n      wx.onMenuShareTimeline(shareData)\n      // wx.updateAppMessageShareData(\n      // wx.updateTimelineShareData()\n    })\n    wx.error(function(res){\n      console.log(res,'res')\n            // config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名。\n    });\n  },\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br"),e("span",{staticClass:"line-number"},[s._v("46")]),e("br"),e("span",{staticClass:"line-number"},[s._v("47")]),e("br"),e("span",{staticClass:"line-number"},[s._v("48")]),e("br")])]),e("h2",{attrs:{id:"微信h5支付"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#微信h5支付"}},[s._v("#")]),s._v(" 微信h5支付")]),s._v(" "),e("ol",[e("li",[s._v("注意事项")])]),s._v(" "),e("ul",[e("li",[s._v("需要在微信商户平台申请h5支付 "),e("code",[s._v("注意审核时间为3-5个工作日")])]),s._v(" "),e("li",[s._v("需要设置h5支付域名")]),s._v(" "),e("li",[s._v("如果需要与app webview中调取需要app设置"),e("code",[s._v('2. 如果是APP里调起H5支付，需要在webview中手动设置referer，如( Map extraHeaders = new HashMap(); extraHeaders.put("Referer", "商户申请H5时提交的授权域名");//例如 http://www.baidu.com ))')])])]),s._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[s._v("代码实现")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("   // window.location.href = res.data.info[0].mweb_url + '&redirect_url=' + encodeURIComponent(res.data.info[0].redirect_url) \n   注意encodeURIComponent 必须否者会跳到域名根目录\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);