(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{386:function(s,n,a){"use strict";a.r(n);var e=a(41),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"webpack配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack配置"}},[s._v("#")]),s._v(" webpack配置")]),s._v(" "),a("ol",[a("li",[s._v("公司项目有个需求不同环境需要引入不同cnd图片链接，考虑到每次发版都需要是手动批量替换比较繁琐，试着想着用全局变量去解决但是发现项目的图片的引用的方式千奇百怪全局变量是没法解决的经过一番搜索发现了webpack的url-loader；")])]),s._v(" "),a("h2",{attrs:{id:"url-loader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#url-loader"}},[s._v("#")]),s._v(" url-loader")]),s._v(" "),a("p",[s._v("官网解释： Loads files as base64 encoded URL(将文件作为base64编码的URL加载)")]),s._v(" "),a("h3",{attrs:{id:"参数配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参数配置"}},[s._v("#")]),s._v(" 参数配置")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[s._v("名称")]),s._v(" "),a("th",{staticStyle:{"text-align":"right"}},[s._v("类型")]),s._v(" "),a("th",{staticStyle:{"text-align":"center"}},[s._v("默认")])])]),s._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("limit")]),s._v(" "),a("td",{staticStyle:{"text-align":"right"}},[s._v("{Boolean Number String}")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("true")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("mimeType")]),s._v(" "),a("td",{staticStyle:{"text-align":"right"}},[s._v("{Boolean  String}")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("基于"),a("a",{attrs:{href:"https://github.com/jshttp/mime-types",target:"_blank",rel:"noopener noreferrer"}},[s._v("mime类型"),a("OutboundLink")],1)])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("encoding")]),s._v(" "),a("td",{staticStyle:{"text-align":"right"}},[s._v("{Boolean String}")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("base64")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("generator")]),s._v(" "),a("td",{staticStyle:{"text-align":"right"}},[s._v("{Function}")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}})]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("fallback")]),s._v(" "),a("td",{staticStyle:{"text-align":"right"}},[s._v("{String}")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("file-loader")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("esModule")]),s._v(" "),a("td",{staticStyle:{"text-align":"right"}},[s._v("{Boolean}")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("true")])])])]),s._v(" "),a("p",[s._v("具体配置")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    config\n    .module\n    .rule(\"images\")\n    .test(/\\.(jpg|png|gif)$/)\n    .use(\"url-loader\")\n    .loader(\"url-loader\")\n    .options({\n      // 大于此limit的,根据limit判断静态资源是否生成是否base64\n      // 而url-loader的options配置项也会被传递给file-loader\n      limit: process.env.NODE_ENV === 'production'?false:true,\n      esModule: false,\n      // 根据环境使用cdn或相对路径\n      publicPath:defaultSettings.baseStatic,\n      outputPath: 'images',\n      // 配置打包后图片文件名\n      name: '[name].[ext]',\n    })\n    .end();\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("h3",{attrs:{id:"配置导致引入资源也会被打包到文件夹-于是引用webpack-file-manager-plugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置导致引入资源也会被打包到文件夹-于是引用webpack-file-manager-plugin"}},[s._v("#")]),s._v(" 配置导致引入资源也会被打包到文件夹 于是引用"),a("a",{attrs:{href:"https://www.npmjs.com/package/filemanager-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[s._v("Webpack File Manager Plugin"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"具体配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#具体配置"}},[s._v("#")]),s._v(" 具体配置")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('configureWebpack: {\n    plugins: [\n      new FileManagerPlugin({\n        onEnd: {\n          delete: [\'./dist/images\'],\n          copy: [\n            { source: "./src/assets/MP_verify_5NsPDEaXBnWp0Rvd.txt", destination: "./dist" }\n          ]\n        }\n      })\n    ]\n  },\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h2",{attrs:{id:"项目webpack详细配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目webpack详细配置"}},[s._v("#")]),s._v(" 项目webpack详细配置")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("'use strict'\nconst path = require('path')\nconst defaultSettings = require('./src/config/index.js')\nconst FileManagerPlugin = require('filemanager-webpack-plugin');\nfunction resolve(dir) {\n  return path.join(__dirname, dir)\n}\nmodule.exports = {\n  publicPath: './', \n  //  publicPath: '/app/', //署应用包时的基本 URL。  vue-router history模式使用\n  outputDir: 'dist', //  生产环境构建文件的目录\n  assetsDir: 'static', //  outputDir的静态资源(js、css、img、fonts)目录\n  lintOnSave: false,\n  productionSourceMap: false, // 生产环境的 source map\n  chainWebpack: (config) => {\n    config.resolve.alias\n      .set('@', resolve('./src'))\n  },\n  configureWebpack: {\n    plugins: [\n      new FileManagerPlugin({\n        onEnd: {\n          delete: ['./dist/images'],\n          copy: [\n            { source: \"./src/assets/MP_verify_5NsPDEaXBnWp0Rvd.txt\", destination: \"./dist\" } //微信分享配置文件\n          ]\n        }\n      })\n    ]\n  },\n\n  devServer: {\n    open: true, // 启动后打开浏览器\n    overlay: {\n      //  当出现编译器错误或警告时，在浏览器中显示全屏覆盖层\n      warnings: false,\n      errors: true\n    },\n    proxy: {\n      '/appapi': {\n        target: \"https://p.live.biummtv.cn/\",\n        changeOrigin: true,//是否允许跨越\n        pathRewrite: {\n          '^/appapi': '/'\n        }\n      }\n\n    }\n  },\n  chainWebpack(config) {\n    if (process.env.NODE_ENV === 'production') {\n      if (process.env.npm_config_report) {\n        config\n          .plugin('webpack-bundle-analyzer')\n          .use(require('webpack-bundle-analyzer').BundleAnalyzerPlugin)\n          .end();\n        config.plugins.delete('prefetch')\n      }\n    }\n    config\n    .module\n    .rule(\"images\")\n    .test(/\\.(jpg|png|gif)$/)\n    .use(\"url-loader\")\n    .loader(\"url-loader\")\n    .options({\n      // 大于此limit的,根据limit判断静态资源是否生成是否base64\n      // 而url-loader的options配置项也会被传递给file-loader\n      limit: process.env.NODE_ENV === 'production'?false:true,\n      esModule: false,\n      // 根据环境使用cdn或相对路径\n      publicPath:defaultSettings.baseStatic,\n      outputPath: 'images',\n      // 配置打包后图片文件名\n      name: '[name].[ext]',\n    })\n    .end();\n    config.plugins.delete('preload') \n    config.plugins.delete('prefetch') \n   \n    // alias\n    config.resolve.alias\n      .set('@', resolve('src'))\n      .set('assets', resolve('src/assets'))\n      .set('api', resolve('src/api'))\n      .set('views', resolve('src/views'))\n      .set('components', resolve('src/components'))\n    config.module\n      .rule('vue')\n      .use('vue-loader')\n      .loader('vue-loader')\n      .tap(options => {\n        options.compilerOptions.preserveWhitespace = true\n        return options\n      })\n      .end()\n      \n    config.when(process.env.NODE_ENV !== 'development', config => {\n      config\n        .plugin('ScriptExtHtmlWebpackPlugin')\n        .after('html')\n        .use('script-ext-html-webpack-plugin', [\n          {\n            // `runtime` must same as runtimeChunk name. default is `runtime`\n            inline: /runtime\\..*\\.js$/\n          }\n        ])\n        .end()\n      config.optimization.splitChunks({\n        chunks: 'all',\n        cacheGroups: {\n          commons: {\n            name: 'chunk-commons',\n            test: resolve('src/components'), // can customize your rules\n            minChunks: 3, //  minimum common number\n            priority: 5,\n            reuseExistingChunk: true\n          },\n          libs: {\n            name: 'chunk-libs',\n            chunks: 'initial', // only package third parties that are initially dependent\n            test: /[\\\\/]node_modules[\\\\/]/,\n            priority: 10\n          }\n        }\n      })\n      config.optimization.runtimeChunk('single')\n    })\n\n   \n   \n\n  }\n}\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br"),a("span",{staticClass:"line-number"},[s._v("122")]),a("br"),a("span",{staticClass:"line-number"},[s._v("123")]),a("br"),a("span",{staticClass:"line-number"},[s._v("124")]),a("br"),a("span",{staticClass:"line-number"},[s._v("125")]),a("br"),a("span",{staticClass:"line-number"},[s._v("126")]),a("br"),a("span",{staticClass:"line-number"},[s._v("127")]),a("br"),a("span",{staticClass:"line-number"},[s._v("128")]),a("br"),a("span",{staticClass:"line-number"},[s._v("129")]),a("br"),a("span",{staticClass:"line-number"},[s._v("130")]),a("br"),a("span",{staticClass:"line-number"},[s._v("131")]),a("br"),a("span",{staticClass:"line-number"},[s._v("132")]),a("br"),a("span",{staticClass:"line-number"},[s._v("133")]),a("br"),a("span",{staticClass:"line-number"},[s._v("134")]),a("br"),a("span",{staticClass:"line-number"},[s._v("135")]),a("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);